import os
import zipfile

def distribute_txt_to_others(input_dir):
    source_zip = os.path.join(input_dir, "D_1.zip")
    
    # Verificar se o arquivo D_1.zip existe
    if not os.path.exists(source_zip):
        print("Arquivo D_1.zip não encontrado.")
        return

    # Extrair o .txt de D_1.zip
    with zipfile.ZipFile(source_zip, 'r') as zip_ref:
        # Assumindo que só há um .txt dentro de D_1.zip
        txt_file = [name for name in zip_ref.namelist() if name.endswith('.txt')][0]
        zip_ref.extract(txt_file, input_dir)
        txt_path = os.path.join(input_dir, txt_file)

    # Iterar pelos outros arquivos .zip e adicionar o .txt
    for i in range(2, 10):  # De D_2.zip a D_9.zip
        target_zip_path = os.path.join(input_dir, f"D_{i}.zip")
        if os.path.exists(target_zip_path):
            with zipfile.ZipFile(target_zip_path, 'a') as zipf:  # 'a' para adicionar sem remover conteúdo existente
                zipf.write(txt_path, os.path.basename(txt_path))

    # Você pode escolher remover o .txt extraído do diretório ou deixá-lo lá
    # os.remove(txt_path)  # Descomente esta linha se você quiser remover o .txt extraído

if __name__ == "__main__":
    directory = input("Digite o diretório contendo os arquivos .zip: ")
    distribute_txt_to_others(directory)
